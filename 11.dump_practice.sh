# ==========================================
# MySQL DUMP 치트시트
# SQL이 아니라 "시스템 명령어"
# ==========================================


# ------------------------------------------
# 1. 기본 개념
# ------------------------------------------
# - mysqldump : MySQL 스키마/데이터를 .sql 파일로 내보내는 백업 도구.
# - mysql     : .sql 덤프 파일을 읽어서 스키마에 적용(복원)하는 클라이언트.
# - 둘 다 SQL 구문이 아니라 터미널/쉘에서 실행하는 명령어.


# ------------------------------------------
# 2. 스키마 단위 백업 (덤프 파일 생성)
# ------------------------------------------
# 형식:
#   mysqldump -u [사용자] -p [스키마명] > [덤프파일명.sql]

# 예) board 스키마를 board_dump.sql 로 백업
mysqldump -u root -p board > board_dump.sql

# 실행 후 비밀번호를 묻는 프롬프트가 나오면 root 비밀번호 입력.


# ------------------------------------------
# 3. 스키마 단위 복원 (덤프 파일 적용)
# ------------------------------------------
# 형식:
#   mysql -u [사용자] -p [스키마명] < [덤프파일명.sql]
#
# 주의:
#  - 덤프 파일 경로(현재 디렉터리)에 파일이 있어야 함.
#  - 복원 대상 스키마(데이터베이스)는 미리 생성되어 있어야 함.

# 1) 복원용 스키마 생성
CREATE DATABASE board;

# 2) 덤프 파일 복원
mysql -u root -p board < board_dump.sql


# ------------------------------------------
# 4. 인코딩 및 환경 관련 주의사항
# ------------------------------------------
# 1) VSCode 저장 인코딩
#  - VSCode에서 .sql 파일의 저장 인코딩을 UTF-8 로 설정할 것.
#  - 잘못된 인코딩으로 저장하면 아래와 같은 에러가 발생할 수 있음:
#    ERROR: ASCII '\0' appeared in the statement, but this is not allowed
#    unless option --binary-mode is enabled ...
#  - 저장 인코딩을 UTF-8 로 맞춘 뒤 다시 시도하면 문제 없이 덤프/복원 가능.

# 2) 리다이렉션(<) 인식 문제
#  - 일부 터미널/쉘에서 `<` 리다이렉션이 제대로 동작하지 않을 수 있음.
#  - 이 경우 Git Bash나 다른 터미널에서 동일 명령을 실행하면 해결되는 경우가 많음.


# ------------------------------------------
# 5. 자주 쓰는 패턴 요약
# ------------------------------------------
# - 스키마 전체 백업:
#     mysqldump -u root -p board > board_dump.sql
#
# - 스키마 생성 후 복원:
#     CREATE DATABASE board;
#     mysql -u root -p board < board_dump.sql
#
# - 에러 발생 시:
#   - .sql 파일 인코딩이 UTF-8인지 확인
#   - 필요 시 다른 터미널(Git Bash 등)에서 명령 실행
